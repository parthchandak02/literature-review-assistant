[pytest]
# Pytest configuration for test organization and maintenance

# Test discovery patterns
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Test paths
testpaths = tests

# Output options
addopts = 
    -v
    --strict-markers
    --tb=short
    --disable-warnings

# Markers for test categorization
markers =
    # Test type markers
    unit: Unit tests for individual components
    integration: Integration tests for component interactions
    e2e: End-to-end tests for complete workflows
    
    # Module markers (for filtering by source module)
    module_citations: Tests for citations module
    module_search: Tests for search module
    module_orchestration: Tests for orchestration module
    module_export: Tests for export module
    module_writing: Tests for writing module
    module_screening: Tests for screening module
    module_extraction: Tests for extraction module
    module_quality: Tests for quality module
    module_prisma: Tests for prisma module
    module_config: Tests for config module
    module_utils: Tests for utils module
    module_observability: Tests for observability module
    module_tools: Tests for tools module
    module_validation: Tests for validation module
    module_version_control: Tests for version_control module
    module_visualization: Tests for visualization module
    module_state: Tests for state module
    module_testing: Tests for testing module
    module_enrichment: Tests for enrichment module
    module_schemas: Tests for schemas module
    
    # Component markers (for broader categorization)
    component_citations: Citation-related functionality
    component_search: Search and database connector functionality
    component_workflow: Workflow orchestration
    component_export: Export and submission functionality
    component_writing: Article writing functionality
    component_quality: Quality assessment functionality
    
    # Speed markers
    fast: Fast-running tests (< 1 second)
    slow: Slow-running tests (> 1 second, may require external services)
    
    # Dependency markers
    requires_api: Tests that require external API access
    requires_db: Tests that require database access
    requires_llm: Tests that require LLM API access
    requires_network: Tests that require network access
    
    # Feature markers
    feature_manubot: Tests for Manubot integration
    feature_prisma: Tests for PRISMA diagram generation
    feature_bibliometrics: Tests for bibliometric features
    feature_checkpoints: Tests for checkpoint/resume functionality

# Coverage configuration (when using pytest-cov)
[coverage:run]
source = src
omit = 
    */tests/*
    */test_*.py
    */__pycache__/*
    */venv/*
    */env/*

[coverage:report]
precision = 2
show_missing = True
skip_covered = False

[coverage:html]
directory = htmlcov
