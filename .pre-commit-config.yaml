# Pre-commit hooks for test structure validation
# Install with: pre-commit install
# Run manually: pre-commit run --all-files

repos:
  - repo: local
    hooks:
      - id: check-test-naming
        name: Check Test File Naming
        entry: bash -c 'for file in $(git diff --cached --name-only --diff-filter=A | grep "tests/.*\.py$"); do if [[ ! "$file" =~ ^tests/.*test_.*\.py$ ]] && [[ "$file" != "tests/conftest.py" ]] && [[ "$file" != "tests/__init__.py" ]] && [[ ! "$file" =~ ^tests/fixtures/ ]]; then echo "ERROR: Test file $file does not follow naming convention (should start with test_)"; exit 1; fi; done'
        language: system
        pass_filenames: false
        stages: [commit]
